var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,l=(e,l)=>{for(var s in l||(l={}))n.call(l,s)&&o(e,s,l[s]);if(t)for(var s of t(l))a.call(l,s)&&o(e,s,l[s]);return e};import{u as s,r,R as c,L as i,S as m,I as u,U as p,a as d,E as h,b as g,B as E,P as f,m as y,c as x,M as b,d as k,F as v,e as S,f as C,g as N,h as j,i as I,j as O,C as w,k as L,l as T,n as P,o as B,Q as z,D as V,p as R,q as J,s as q,t as F,v as H,w as M}from"./vendor.1d8fbc53.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const K="http://194.87.70.176:9988/",U="qwertyuiopasdfghjklzxcvbnm9632587410";const{Option:Z}=k,$=["common","special","important","necessary","immediately"];function _(e){const t=r.exports.useContext(te),[n,a]=r.exports.useState(!1),[o,s]=r.exports.useState([]),[i,m]=r.exports.useState("react"),[p,d]=r.exports.useState(),[h,g]=r.exports.useState(""),[f,y]=r.exports.useState(""),[w,L]=r.exports.useState(1),[T,P]=r.exports.useState(1),B={name:"file",maxCount:1,showUploadList:!1,action:K+"note/upload",headers:{token:localStorage.getItem("token")||""},onChange(e){if("uploading"!==e.file.status){const t=e.fileList[0],n=JSON.parse(t.xhr.response);if(console.log(n),n.success){const e=n.data,t=`<img src="${K+e.destination+e.filename}" alt="description" />`;console.log(t),y(f+t)}}"done"===e.file.status?x.success("上传成功"):"error"===e.file.status&&x.error("上传失败")}},z={aspect:w,rotate:!0,quality:1,minZoom:1,maxZoom:3,modalTitle:"裁切图片",modalOk:"确定",modalCancel:"取消"},V={0:"0",1:"1",2:"2",3:{style:{color:"#f50"},label:c.createElement("strong",null,"3")}};r.exports.useEffect((()=>{e.handle&&fetch(K+"routes/getRoutes",{method:"get",headers:{"Content-Type":"application/json",token:localStorage.getItem("token")||""}}).then((e=>e.json())).then((e=>{if(e.success){const t=e.data.reduce(((e,t)=>(e||(e=[]),e=e.concat(t.children))),[]);s(t)}}))}),[]);const R=()=>{g(""),y(""),P(1)};return r.exports.useEffect((()=>{if(e.visible&&"edit"===e.handle){const{title:t,content:n,important:a}=e.value;g(t),y(n),P(a)}}),[e]),c.createElement(c.Fragment,null,c.createElement(b,{title:"条目",visible:e.visible,okText:"确定",cancelText:"取消",onOk:()=>{console.log(i,p,h,f,T),a(!0),"add"===e.handle?fetch(K+"note/addNote",{method:"post",body:JSON.stringify({route:i,index:p,title:h,content:f,important:T}),headers:{"Content-Type":"application/json",token:localStorage.getItem("token")||""}}).then((e=>e.json())).then((n=>{n.success?(x.success(n.msg),a(!1),e.handleVisible(),R(),t((e=>!e))):(x.error(n.msg),a(!1))})):"edit"===e.handle&&fetch(K+"note/updateNote",{method:"post",body:JSON.stringify({id:e.value.id,route:i,title:h,content:f,important:T}),headers:{"Content-Type":"application/json",token:localStorage.getItem("token")||""}}).then((e=>e.json())).then((n=>{n.success?(x.success(n.msg),a(!1),e.handleVisible(),R(),t((e=>!e))):(x.error(n.msg),a(!1))}))},confirmLoading:n,onCancel:()=>{e.handleVisible()}},c.createElement(k,{defaultValue:"react",style:{width:120,marginBottom:"20px"},onChange:e=>{m(e)}},o.map((e=>c.createElement(Z,{value:e.key,key:e.key},e.title)))),c.createElement(u,{size:"large",value:h,placeholder:"标题",style:{marginBottom:"20px"},prefix:c.createElement(v,null),onChange:e=>{g(e.target.value)}}),c.createElement(S,{theme:"snow",value:f,placeholder:"内容",style:{marginBottom:"20px"},onChange:e=>{y(e)},modules:{toolbar:[["bold","italic","strike"],["link"],[{script:"sub"},{script:"super"}],[{color:[]}],["code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}]],clipboard:{matchVisual:!1}}}),c.createElement(C,l({},z),c.createElement(N,l({},B),c.createElement(E,{icon:c.createElement(j,null),style:{marginBottom:"20px"}},"图片"))),c.createElement(I,{marks:V,step:.2,min:.2,max:3,value:w,onChange:e=>{L(e)}}),c.createElement("div",null,c.createElement(O,{tooltips:$,style:{color:"#ed5a65",marginBottom:"20px"},onChange:e=>{P(e)},value:T}),T?c.createElement("span",{className:"ant-rate-text"},$[T-1]):""),"add"===e.handle?c.createElement(u,{size:"large",type:"number",maxLength:3,value:p,placeholder:"插入位置",style:{width:"30%",display:"block"},onChange:e=>{d(e.target.value)}}):null))}function A(e){const t=s(),[n,a]=r.exports.useState(!1),o=()=>{a(!n)};return c.createElement("header",null,c.createElement(_,{handle:"add",visible:n,handleVisible:o}),c.createElement(E,{type:"primary",icon:c.createElement(v,null),onClick:o}),c.createElement(E,{danger:!0,type:"primary",icon:c.createElement(w,null),onClick:()=>{localStorage.removeItem("token"),t.goBack()}}))}const{SubMenu:D}=L,{Sider:Q}=i;function Y(e){const[t,n]=r.exports.useState(!1),[a,o]=r.exports.useState([]),l=t=>{e.changeSelect(t.keyPath)};return r.exports.useEffect((()=>{fetch(K+"routes/getRoutes",{method:"get",headers:{"Content-Type":"application/json",token:localStorage.getItem("token")||""}}).then((e=>e.json())).then((e=>{e.success&&o(e.data)}))}),[]),c.createElement(Q,{theme:"light",collapsible:!0,collapsed:t,onCollapse:()=>{n(!t)}},c.createElement(L,{theme:"light",defaultSelectedKeys:["1"],mode:"inline"},a.map((e=>{const{title:t,key:n,children:a}=e;return c.createElement(D,{key:n,icon:c.createElement(T,null),title:t},a?a.map((e=>{const{key:t,title:n}=e;return c.createElement(L.Item,{key:t,onClick:l},n)})):null)}))))}function G(e){const t=r.exports.useContext(ee),n=r.exports.useContext(te),[a,o]=r.exports.useState([]),[l,s]=r.exports.useState(!1),[i,m]=r.exports.useState({}),u=(e,t)=>{s(!l),m(t)};return r.exports.useEffect((()=>{const t=e.path;t&&fetch(`http://194.87.70.176:9988/note/getNote?route=${t}`,{method:"get",headers:{"Content-Type":"application/json",token:localStorage.getItem("token")||""}}).then((e=>e.json())).then((e=>{e.success?(console.log(e.data),o(e.data)):o([])}))}),[e.path,t]),c.createElement("div",null,a.map(((t,a)=>c.createElement("div",{className:"note-container",key:a},c.createElement("div",{className:"note-title"},c.createElement("div",null,t.title),c.createElement(E,{type:"primary",shape:"circle",icon:c.createElement(P,null),size:"small",style:{marginRight:"10px"},onClick:e=>{u(0,t)}}),c.createElement(B,{title:"是否确定删除？",okText:"确定",cancelText:"取消",icon:c.createElement(z,{style:{color:"red"}}),onConfirm:()=>{(t=>{const a=e.path;fetch(K+"note/delNote",{method:"post",body:JSON.stringify({id:t,route:a}),headers:{"Content-Type":"application/json",token:localStorage.getItem("token")||""}}).then((e=>e.json())).then((e=>{e.success?(x.success(e.msg),n((e=>!e))):x.error(e.msg)}))})(t.id)}},c.createElement(E,{type:"primary",shape:"circle",icon:c.createElement(V,null),size:"small",danger:!0}))),c.createElement("div",null,c.createElement(O,{disabled:!0,style:{color:"#ed5a65",margin:"10px 0"},value:t.important})),c.createElement("div",{className:"note-content upload-image-container",dangerouslySetInnerHTML:{__html:t.content}})))),c.createElement(_,{handle:"edit",value:i,visible:l,handleVisible:u}))}const{Content:W}=i;function X(e){const[t,n]=r.exports.useState(""),[a,o]=r.exports.useState("");return r.exports.useEffect((()=>{n(e.select[0]),o(e.select[1])}),[e.select]),c.createElement(W,{style:{marginLeft:"10px",overflowY:"auto",height:"90vh"}},c.createElement(R,{style:{margin:"16px 0"}},c.createElement(R.Item,null,a),c.createElement(R.Item,null,t)),c.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360}},c.createElement(G,{path:t})))}const ee=c.createContext({}),te=c.createContext({});function ne(e){const[t,n]=r.exports.useState(!1);return c.createElement(ee.Provider,{value:t},c.createElement(te.Provider,{value:n},e.children))}J.render(c.createElement(q,null,c.createElement(F,null,c.createElement(H,{path:"/login",component:function(){const e=s(),[t,n]=r.exports.useState(!1),[a,o]=r.exports.useState(""),[l,b]=r.exports.useState(""),k=r.exports.useRef(null),v=()=>{if(n(!0),a.length>=3&&l.length>=6){const e=y(l),t=U.indexOf(l[1]),n=U.substr(t,6),a=y(e+n);S(a)}},S=t=>{fetch(K+"routes/login",{method:"post",body:JSON.stringify({account:a,password:t}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((t=>{n(!1),t.success?(x.success(t.msg),localStorage.setItem("token",t.data),e.push("/app")):x.error(t.msg)}))};return r.exports.useEffect((()=>{k.current.focus()}),[]),c.createElement(c.Fragment,null,c.createElement(i,{style:{minHeight:"100vh",backgroundColor:"#2b1216"}},c.createElement(m,{direction:"vertical",className:"space"},c.createElement(u,{size:"large",ref:k,maxLength:16,placeholder:"account",className:"input",onChange:e=>{o(e.target.value)},prefix:c.createElement(p,null)}),c.createElement(u.Password,{size:"large",maxLength:24,placeholder:"password",className:"input",onChange:e=>{b(e.target.value)},onPressEnter:v,prefix:c.createElement(d,null),iconRender:e=>e?c.createElement(h,null):c.createElement(g,null)}),c.createElement(E,{type:"primary",icon:c.createElement(f,null),loading:t,className:"button",onClick:v},"握手"))))}}),c.createElement(H,{path:"/app",component:function(){const[e,t]=r.exports.useState([]);return c.createElement(c.Fragment,null,c.createElement(ne,null,c.createElement(i,{style:{minHeight:"100vh"}},c.createElement(A,null),c.createElement(i,{className:"site-layout"},c.createElement(Y,{changeSelect:e=>{t(e)}}),c.createElement(X,{select:e})))))}}),c.createElement(M,{to:"/login"}))),document.getElementById("root"));
